<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>

</head>
<body>
	<div id="div_addRecommendation">
		<h1>添加热门推荐</h1>

		<label>controlId</label> <input type="text" name="add_name" id="add_name" class="txtfield" /> 
		<label>上传图片</label> <input id="f" type="file" name="f" />
		<input type="button" name="add_recommend" id="add_recommend" class="flatbtn-blu hidemodal" value="添加" />
	</div>
	<script src="https://cdn.bootcss.com/jquery/2.2.0/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
	$(function(){
		$("#add_recommend").click(function() {
			var name = $("#add_name").val();
			var f = document.getElementById("f").files[0];
			var request = "http://127.0.0.1:8888/market/rest/v1/material/upload";
			var data = new FormData();
			data.append("control_id", name);
			data.append("file", f);
			//data.append("a", a);

			$.ajax({
				url : request,
				data : data,
				cache : false,
				processData : false,
				contentType : false,
				type : 'POST',
				//timeout : 3000,
				success : function(result) {
					alert("reqeust success");
				},
				error : function() {
					alert("reqeust error");
				}
			});
		});
	})
	
	function ipToNumber(ip) { 
	  var num = 0; 
	  if(ip == "") { 
		return num; 
	  }   
	  var aNum = ip.split(".");  
	  if(aNum.length != 4) { 
		return num; 
	  }   
	  num += parseInt(aNum[0]) << 24; 
	  num += parseInt(aNum[1]) << 16; 
	  num += parseInt(aNum[2]) << 8; 
	  num += parseInt(aNum[3]) << 0; 
	  num = num >>> 0;//这个很关键，不然可能会出现负数的情况 
	  return num;  
	} 

	function numberToIp(number) {   
	  var ip = ""; 
	  if(number <= 0) { 
		return ip; 
	  } 
	  var ip3 = (number << 0 ) >>> 24; 
	  var ip2 = (number << 8 ) >>> 24; 
	  var ip1 = (number << 16) >>> 24; 
	  var ip0 = (number << 24) >>> 24 
		
	  ip += ip3 + "." + ip2 + "." + ip1 + "." + ip0; 
		
	  return ip;   
	}
</script>
</body>
</html>